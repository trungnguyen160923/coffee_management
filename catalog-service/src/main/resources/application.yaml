server:
  port: ${SERVER_PORT:8004}
  servlet:
    context-path: ${SERVER_CONTEXT_PATH:/catalogs}

spring:
  config:
    import: optional:file:.env[.properties]
  application:
    name: catalog-service
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/catalog_db}
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: ${JPA_DDL_AUTO:update}
    show-sql: ${JPA_SHOW_SQL:true}
  servlet:
    multipart:
      max-file-size: ${MULTIPART_MAX_FILE_SIZE:10MB}
      max-request-size: ${MULTIPART_MAX_REQUEST_SIZE:10MB}
      enabled: ${MULTIPART_ENABLED:true}
  task:
    scheduling:
      enabled: ${TASK_SCHEDULING_ENABLED:true}
      pool:
        size: ${TASK_POOL_SIZE:2}
      thread-name-prefix: "${TASK_THREAD_PREFIX:scheduled-}"
  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: ${MAIL_SMTP_AUTH:true}
          starttls:
            enable: ${MAIL_SMTP_STARTTLS:true}
          ssl:
            trust: ${MAIL_SMTP_SSL_TRUST:smtp.gmail.com}

  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9094}
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
      properties:
        spring.json.add.type.headers: true
    properties:
      spring.json.trusted.packages: "${KAFKA_JSON_TRUSTED_PACKAGES:*}"

# File upload configuration
app:
  upload:
    dir: ${UPLOAD_DIR:./uploads}
  services:
    order: ${ORDER_SERVICE_URL:http://localhost:8002}
    auth: ${AUTH_SERVICE_URL:http://localhost:8001}
  frontend:
    admin-url: ${ADMIN_FRONTEND_URL:http://localhost:5173}
  kafka:
    topics:
      inventory-low-stock: ${TOPIC_INVENTORY_LOW_STOCK:inventory.low.stock}
      inventory-out-of-stock: ${TOPIC_INVENTORY_OUT_OF_STOCK:inventory.out.of.stock}
      purchase-order-supplier-response: ${TOPIC_PO_SUPPLIER_RESPONSE:po.supplier.response}
  inventory-alert:
    scheduler:
      enabled: ${INVENTORY_ALERT_SCHEDULER_ENABLED:true}
      cron: "${INVENTORY_ALERT_CRON:0 */10 * * * ?}"
  stock-adjustment:
    scheduler:
      cron: "${STOCK_ADJUSTMENT_CRON:0 */5 * * * ?}"

jwt:
  signerKey: "${JWT_SIGNER_KEY}"

# Logging configuration
logging:
  level:
    com.service.catalog: ${CATALOG_LOG_LEVEL:INFO}